<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="en-us">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <title>bind - Eve Documentation</title>
    <meta name="generator" content="Hugo 0.19" />

    
    <link rel="canonical" href="https://cmontella.github.io/docs/handbook/bind/">
    
    <meta name="author" content="Eve">
    

    <meta property="og:url" content="https://cmontella.github.io/docs/handbook/bind/">
    <meta property="og:title" content="Eve Documentation">
    
    <meta name="apple-mobile-web-app-title" content="Eve Documentation">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="https://cmontella.github.io/docs/images/favicon.png">
    <link rel="icon" type="image/x-icon" href="https://cmontella.github.io/docs/images/favicon.png">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('https://cmontella.github.io/docs/fonts/icon.eot?52m981');
        src: url('https://cmontella.github.io/docs/fonts/icon.eot?#iefix52m981')
               format('embedded-opentype'),
             url('https://cmontella.github.io/docs/fonts/icon.woff?52m981')
               format('woff'),
             url('https://cmontella.github.io/docs/fonts/icon.ttf?52m981')
               format('truetype'),
             url('https://cmontella.github.io/docs/fonts/icon.svg?52m981#icon')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="https://cmontella.github.io/docs/stylesheets/application.css">
    <link rel="stylesheet" href="https://cmontella.github.io/docs/stylesheets/temporary.css">
    <link rel="stylesheet" href="https://cmontella.github.io/docs/stylesheets/palettes.css">
    <link rel="stylesheet" href="https://cmontella.github.io/docs/stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu&#43;Mono">
    <style>
      body, input {
        font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <script src="https://cmontella.github.io/docs/javascripts/modernizr.js"></script>

    

  </head>
  <body class=" ">

<div class="layer-wrapper header-wrapper">
  <header class="layer">
    <a href="http://witheve.com">
    <div class="logo">
      <img src="https://witheve.github.io/assets/images/logo_square.png" />
      <h1><img alt="EVE" src="https://cmontella.github.io/docs/images/eve.svg" /></h1>
    </div>
    </a>
    <div class="flex-spacer"></div>
    <nav>
      <a class="btn rounded cta secondary play-cta" href="http://play.witheve.com">Play</a>
      
      <a href="http://incidentalcomplexity.com">Blog</a>
      <a href="http://docs.witheve.com">Docs</a>
      <a href="https://groups.google.com/forum/#!forum/eve-talk">Community</a>
    </nav>
  </header>
</div>


	
	


<main class="main layer-wrapper">
	<div class="toplayer">
		<div class="drawer">
			<div aria-label="Navigation">
  
  <div class="scrollable">
    <div class="wrapper">
      

      
      <div id="sidebar" class="nav-collapse">
          <ul class="sidebar-menu">
            
            
              
                <li class="sub-menu active">
                  <a href="https://cmontella.github.io/docs/" class="">
                      
                      <span class="colored">Appendix</span>
                      <span class="menu-arrow arrow_carrot-right"></span>
                  </a>
                  <ul class="sub">
                    
                      <li><a href="https://cmontella.github.io/docs/handbook/ebnf/"> Grammar </a> </li>
                      
                    
                      <li><a href="https://cmontella.github.io/docs/handbook/commonmark/"> CommonMark </a> </li>
                      
                    
                      <li><a href="https://cmontella.github.io/docs/handbook/glossary/"> Glossary </a> </li>
                      
                    
                  </ul>
                </li>
              
            
              
                <li class="sub-menu active">
                  <a href="https://cmontella.github.io/docs/" class="">
                      
                      <span class="colored">Core Language</span>
                      <span class="menu-arrow arrow_carrot-right"></span>
                  </a>
                  <ul class="sub">
                    
                      <li><a href="https://cmontella.github.io/docs/handbook/records/"> Records </a> </li>
                      
                        <ul class="sub">
                          
                            <li><a href="https://cmontella.github.io/docs/handbook/tags/">Tags</a></li>
                          
                            <li><a href="https://cmontella.github.io/docs/handbook/not/">not</a></li>
                          
                        </ul>
                      
                    
                      <li><a href="https://cmontella.github.io/docs/handbook/equivalence/"> Equivalence </a> </li>
                      
                        <ul class="sub">
                          
                            <li><a href="https://cmontella.github.io/docs/handbook/equality/">Equality</a></li>
                          
                            <li><a href="https://cmontella.github.io/docs/handbook/inequality/">Inequality</a></li>
                          
                            <li><a href="https://cmontella.github.io/docs/handbook/joins/">Joins</a></li>
                          
                        </ul>
                      
                    
                      <li><a href="https://cmontella.github.io/docs/handbook/actions/"> Actions </a> </li>
                      
                        <ul class="sub">
                          
                            <li><a href="https://cmontella.github.io/docs/handbook/search/">search</a></li>
                          
                            <li class="selected"><a href="https://cmontella.github.io/docs/handbook/bind/">bind</a></li>
                          
                            <li><a href="https://cmontella.github.io/docs/handbook/commit/">commit</a></li>
                          
                        </ul>
                      
                    
                      <li><a href="https://cmontella.github.io/docs/handbook/expressions/"> Expressions </a> </li>
                      
                        <ul class="sub">
                          
                            <li><a href="https://cmontella.github.io/docs/handbook/functions/">Functions</a></li>
                          
                            <li><a href="https://cmontella.github.io/docs/handbook/aggregates/">Aggregates</a></li>
                          
                            <li><a href="https://cmontella.github.io/docs/handbook/if-then/">if-then</a></li>
                          
                            <li><a href="https://cmontella.github.io/docs/handbook/is/">is</a></li>
                          
                            <li><a href="https://cmontella.github.io/docs/handbook/string-interpolation/">String Interpolation</a></li>
                          
                        </ul>
                      
                    
                      <li><a href="https://cmontella.github.io/docs/handbook/update-operators/"> Update Operators </a> </li>
                      
                        <ul class="sub">
                          
                            <li><a href="https://cmontella.github.io/docs/handbook/add/">Add: &#43;=</a></li>
                          
                            <li><a href="https://cmontella.github.io/docs/handbook/set/">Set: :=</a></li>
                          
                            <li><a href="https://cmontella.github.io/docs/handbook/remove/">Remove: -=</a></li>
                          
                            <li><a href="https://cmontella.github.io/docs/handbook/merge/">Merge &lt;-</a></li>
                          
                        </ul>
                      
                    
                  </ul>
                </li>
              
            
              
                <li class="sub-menu active">
                  <a href="https://cmontella.github.io/docs/" class="">
                      
                      <span class="colored">Databases</span>
                      <span class="menu-arrow arrow_carrot-right"></span>
                  </a>
                  <ul class="sub">
                    
                      <li><a href="https://cmontella.github.io/docs/handbook/session/"> @session </a> </li>
                      
                    
                      <li><a href="https://cmontella.github.io/docs/handbook/browser/"> @browser </a> </li>
                      
                    
                      <li><a href="https://cmontella.github.io/docs/handbook/event/"> @event </a> </li>
                      
                        <ul class="sub">
                          
                            <li><a href="https://cmontella.github.io/docs/handbook/event/change/">change</a></li>
                          
                            <li><a href="https://cmontella.github.io/docs/handbook/event/click/">click</a></li>
                          
                            <li><a href="https://cmontella.github.io/docs/handbook/event/keydown/">keydown</a></li>
                          
                            <li><a href="https://cmontella.github.io/docs/handbook/event/keyup/">keyup</a></li>
                          
                        </ul>
                      
                    
                      <li><a href="https://cmontella.github.io/docs/handbook/http/"> @http </a> </li>
                      
                    
                      <li><a href="https://cmontella.github.io/docs/handbook/view/"> @view </a> </li>
                      
                    
                      <li><a href="https://cmontella.github.io/docs/handbook/standard-library/"> Standard Library </a> </li>
                      
                        <ul class="sub">
                          
                            <li><a href="https://cmontella.github.io/docs/handbook/general/">General</a></li>
                          
                            <li><a href="https://cmontella.github.io/docs/handbook/math/">Math</a></li>
                          
                            <li><a href="https://cmontella.github.io/docs/handbook/strings/">Strings</a></li>
                          
                            <li><a href="https://cmontella.github.io/docs/handbook/statistics/">Statistics</a></li>
                          
                            <li><a href="https://cmontella.github.io/docs/handbook/datetime/">Date &amp; Time</a></li>
                          
                        </ul>
                      
                    
                  </ul>
                </li>
              
            
              
                <li class="sub-menu active">
                  <a href="https://cmontella.github.io/docs/" class="">
                      
                      <span class="colored">Eve Programs</span>
                      <span class="menu-arrow arrow_carrot-right"></span>
                  </a>
                  <ul class="sub">
                    
                      <li><a href="https://cmontella.github.io/docs/handbook/model/"> Programming Model </a> </li>
                      
                    
                      <li><a href="https://cmontella.github.io/docs/handbook/sets/"> Sets </a> </li>
                      
                    
                      <li><a href="https://cmontella.github.io/docs/handbook/literate-programming/"> Literate Programming </a> </li>
                      
                    
                      <li><a href="https://cmontella.github.io/docs/handbook/blocks/"> Blocks </a> </li>
                      
                    
                  </ul>
                </li>
              
            
              
                <li class="sub-menu active">
                  <a href="https://cmontella.github.io/docs/" class="">
                      
                      <span class="colored">Guides</span>
                      <span class="menu-arrow arrow_carrot-right"></span>
                  </a>
                  <ul class="sub">
                    
                      <li><a href="https://cmontella.github.io/docs/guides/for-programmers/"> Eve for Programmers </a> </li>
                      
                    
                      <li><a href="https://cmontella.github.io/docs/guides/style/"> Style Guide </a> </li>
                      
                    
                  </ul>
                </li>
              
            
              
                <li class="sub-menu active">
                  <a href="https://cmontella.github.io/docs/" class="">
                      
                      <span class="colored">Introduction</span>
                      <span class="menu-arrow arrow_carrot-right"></span>
                  </a>
                  <ul class="sub">
                    
                      <li><a href="https://cmontella.github.io/docs/handbook/installation/"> Getting Eve </a> </li>
                      
                        <ul class="sub">
                          
                            <li><a href="https://cmontella.github.io/docs/handbook/docker/">Docker</a></li>
                          
                            <li><a href="https://cmontella.github.io/docs/handbook/npm/">npm</a></li>
                          
                            <li><a href="https://cmontella.github.io/docs/handbook/linux/">Linux</a></li>
                          
                            <li><a href="https://cmontella.github.io/docs/handbook/mac/">Mac</a></li>
                          
                            <li><a href="https://cmontella.github.io/docs/handbook/windows/">Windows</a></li>
                          
                        </ul>
                      
                    
                      <li><a href="https://cmontella.github.io/docs/handbook/running/"> Running Eve </a> </li>
                      
                    
                      <li><a href="https://cmontella.github.io/docs/handbook/help/"> Getting Help </a> </li>
                      
                    
                  </ul>
                </li>
              
            
              
                <li>
                  <a class="" href="https://cmontella.github.io/docs/handbook/libraries">
                    
                    <span class="colored">Library</span>
                  </a>
                </li>
              
            
              
                <li class="sub-menu active">
                  <a href="https://cmontella.github.io/docs/" class="">
                      
                      <span class="colored">Tutorials</span>
                      <span class="menu-arrow arrow_carrot-right"></span>
                  </a>
                  <ul class="sub">
                    
                      <li><a href="https://cmontella.github.io/docs/tutorials/quickstart/"> Quickstart </a> </li>
                      
                    
                  </ul>
                </li>
              
            
          </ul>
      </div>

    </div>
  </div>
</div>
		</div>
		<article class="article">
			<div class="wrapper">

				

<h1 id="bind">bind</h1>

<p>updates or creates records, syncing them with matched records</p>

<h2 id="syntax">Syntax</h2>
<div class="highlight"><pre><code class="language-eve" data-lang="eve"><span></span><span class="nv">bind</span>

<span class="nv">bind</span> <span class="err">@</span><span class="nv">database</span><span class="mi">1</span><span class="p">,</span> <span class="nf">...</span><span class="p">,</span> <span class="err">@</span><span class="nv">databaseN</span>
</code></pre></div>

<h2 id="description">Description</h2>

<p><code>bind</code> updates or creates new records with a lifetime equal to matched records within the block. Matched records are any records found in a search action. If matched records change during program execution, all bound records change accordingly. If any matched records are removed (i.e. they no longer match the search), bound records and updates are removed as well.</p>

<p>By default, bound records are directed to a default local database.</p>

<p><code>bind @database1, ..., @databaseN</code> directs bound records to one or more databases.</p>

<h2 id="bind-vs-commit">Bind vs. Commit</h2>

<p>While bind and commit both update records in a database, they do so with slightly different behavior; a bound record has the same lifetime as its supporting records, whereas a committed record exists in the database until it is removed intentionally. Let&rsquo;s take a closer look at this distinction and what the implications are.</p>

<p>Consider the following block that reads the current time, and prints it to the screen:</p>
<div class="highlight"><pre><code class="language-eve" data-lang="eve"><span></span><span class="nv">search</span>
  <span class="p">[</span><span class="err">#</span><span class="nv">time</span> <span class="nv">seconds</span><span class="p">]</span>

<span class="nv">bind</span> <span class="err">@</span><span class="nv">browser</span>
  <span class="p">[</span><span class="err">#</span><span class="nv">div</span> <span class="nv">text</span><span class="nf">:</span> <span class="nv">seconds</span><span class="p">]</span>
</code></pre></div>

<p>In this block we search for the current time and bind it to a message that displays it. The message exists as long as the current time stays the same (1 second obviously). When the time changes, the current message disappears and is replaced with a new message, displaying the new time. This is the behavior of bind; <strong>bound records persist only as long as their matching records</strong>.</p>

<p>Now let&rsquo;s look at what commit does in contrast:</p>
<div class="highlight"><pre><code class="language-eve" data-lang="eve"><span></span><span class="nv">search</span>
  <span class="p">[</span><span class="err">#</span><span class="nv">time</span> <span class="nv">seconds</span><span class="p">]</span>

<span class="nv">commit</span> <span class="err">@</span><span class="nv">browser</span>
  <span class="p">[</span><span class="err">#</span><span class="nv">div</span> <span class="nv">text</span><span class="nf">:</span> <span class="nv">seconds</span><span class="p">]</span>
</code></pre></div>

<p>Compared to the previous block, we only changed <code>bind</code> to <code>commit</code>. When you run this block, at first you&rsquo;ll see a single message like before. However, you&rsquo;ll notice that messages begin to accumulate every second. Unlike with bind, <strong>committed records persist in the database until they are intentionally removed</strong>.</p>

<p>To make things very concrete, we can actually mimic the behavior of a bind using two blocks that commit. We&rsquo;ve already got the first one (the one just above), that commits messages to <code>@browser</code>. Now all we need is a second block, one that removes old committed messages from <code>@browser</code>:</p>
<div class="highlight"><pre><code class="language-eve" data-lang="eve"><span></span><span class="nv">search</span> 
  <span class="p">[</span><span class="err">#</span><span class="nv">time</span> <span class="nv">seconds</span><span class="p">]</span>

<span class="nv">search</span> <span class="err">@</span><span class="nv">browser</span>
  <span class="nv">s</span> <span class="nf">=</span> <span class="nv">seconds</span> <span class="nf">-</span> <span class="mi">1</span>
  <span class="nf">//</span> <span class="kt">Do</span> <span class="nv">some</span> <span class="nv">math</span> <span class="nv">to</span> <span class="nv">handle</span> <span class="nv">the</span> <span class="nv">roll</span> <span class="nv">over</span> <span class="nv">at</span> <span class="mi">60</span> <span class="nv">seconds</span>
  <span class="nv">last</span><span class="nf">-</span><span class="nv">time</span> <span class="nf">=</span> <span class="nv">s</span> <span class="nf">-</span> <span class="mi">60</span> <span class="nf">*</span> <span class="nv">floor</span><span class="p">[</span><span class="nv">value</span><span class="nf">:</span> <span class="nv">s</span> <span class="nf">/</span> <span class="mi">60</span><span class="p">]</span>
  <span class="nv">msg</span> <span class="nf">=</span> <span class="p">[</span><span class="err">#</span><span class="nv">div</span> <span class="nv">text</span><span class="nf">:</span> <span class="nv">last</span><span class="nf">-</span><span class="nv">time</span><span class="p">]</span>
  
<span class="nv">commit</span> <span class="err">@</span><span class="nv">browser</span>
  <span class="nv">msg</span> <span class="nf">:=</span> <span class="nv">none</span>
</code></pre></div>

<p>This block searches for the message that was displayed during the previous second, and sets it to <code>none</code>, thereby removing it from <code>@browser</code>. Therefore, only the message bound to the the current time is displayed on the screen. This behavior is identical to that of the block that binds these messages instead of committing them!</p>

<h3 id="an-execution-perspective">An Execution Perspective</h3>

<p>Another way to understand <code>bind</code> vs. <code>commit</code> is by looking at how the databases change over each tick of the Eve evaluator. We&rsquo;ll consider the same program as before, looking at how its state changes over time. First, consider the bind case. When the program starts, there&rsquo;s nothing in any databases; the program is a blank slate. At <code>t1</code> the first <code>#time</code> is added to <code>@session</code>. This addition is bound to a <code>#div</code>, which is added to <code>@browser</code>. These changes are summarized in the first column of the table below.</p>

<p>At <code>t2</code>, a new <code>#time</code> is added to <code>@session</code>, and the one from <code>t1</code> is removed. Since we used a bind, this causes the existing <code>#div</code> to be removed from <code>@browser</code>, but it is replaced with a new <code>#div</code> reflecting the current time. At <code>t3</code>, the same operations takes place, and this process continues until the program is terminated.</p>

<table class="dataTable">
  <tr>
    <th>
       
    </th>
    <th>
t0
    </th>
    <th>
t1
    </th>
    <th>
t2
    </th>
    <th>
t3
    </th>
  </tr>
  <tr>
    <td>
delta
    </td>
    <td>

    </td>
    <td>
+ [#time seconds: 39]
+ [#div text: "39"]
    </td>
    <td>
+ [#time seconds: 40]
- [#time seconds: 39]
+ [#div text: "40"]
- [#div text: "39"]
    </td>
    <td>
+ [#time seconds: 41]
- [#time seconds: 40]
+ [#div text: "41"]
- [#div text: "40"]
    </td>  
  </tr>
  <tr>
    <td>
@session
    </td>
    <td>
[ ]
    </td>
    <td>
[[#time seconds: 39]]
    </td>
    <td>
[[#time seconds: 40]]
    </td>
    <td>
[[#time seconds: 41]]
    </td>  
  </tr>
  <tr>
    <td>
@browser
    </td>
    <td>
[ ]
    </td>
    <td>
[[#div text: 39]]
    </td>
    <td>
[[#div text: 40]]
    </td>
    <td>
[[#div text: 41]]
    </td>  
  </tr>
</table>

<p>Let&rsquo;s perform the same analysis in the commit case. In this program, things start off the same; initially the database is empty, and at <code>t1</code> a <code>#time</code> and a <code>#div</code> are added to their respective databases. At <code>t2</code>, things get more interesting. While the old <code>#time</code> is still replaced, the <code>#div</code> displaying the old time is not replaced since we committed it to <code>@browser</code>. Indeed, in subsequent rounds of execution, the contents of <code>@browser</code> keeps growing.</p>

<table class="dataTable">
  <tr>
    <th>
       
    </th>
    <th>
t0
    </th>
    <th>
t1
    </th>
    <th>
t2
    </th>
    <th>
t3
    </th>
  </tr>
  <tr>
    <td>
delta
    </td>
    <td>
    </td>
    <td>
+ [#time seconds: 39]
+ [#div text: "39"]
    </td>
    <td>
+ [#time seconds: 40]
- [#time seconds: 39]
+ [#div text: "40"]
    </td>
    <td>
+ [#time seconds: 41]
- [#time seconds: 40]
+ [#div text: "41"]
    </td>  
  </tr>
  <tr>
    <td>
@session
    </td>
    <td>
[ ]
    </td>
    <td>
[[#time seconds: 39]]
    </td>
    <td>
[[#time seconds: 40]]
    </td>
    <td>
[[#time seconds: 41]]
    </td>  
  </tr>
  <tr>
    <td>
@browser
    </td>
    <td>
[ ]
    </td>
    <td>
[[#div text: 39]]
    </td>
    <td>
[[#div text: 39],
 [#div text: 40]]
    </td>
    <td>
[[#div text: 39], 
 [#div text: 40], 
 [#div text: 41]]
    </td>  
  </tr>
</table>

<h2 id="tips">Tips</h2>

<p>When you want to display data in an interface element like a <code>#div</code>, a bind is usually the more appropriate choice compared to a commit. A bind will keep the interface element always up-to-date, whereas a commit will leave lingering elements that no longer reflect the current state of the program.</p>

<p>When searching for an event like a <code>#click</code>, a commit is usually more appropriate than bind. When an event occurs, a record representing the event is added to a database. That record exists for exactly one &ldquo;instant&rdquo;, and then it is removed from the database. During that &ldquo;instant&rdquo;, any block searching for that event will be satisfied and can execute a bind or commit action. If you <code>bind</code> on the event, then the result will disappear as soon as the event does. However, if you <code>commit</code> on the event, then that result will persist after the event has been removed.</p>

<h2 id="examples">Examples</h2>

<p>Display a formatted time:</p>
<div class="highlight"><pre><code class="language-eve" data-lang="eve"><span></span><span class="nv">search</span>
  <span class="p">[</span><span class="err">#</span><span class="nv">time</span> <span class="nv">hours</span> <span class="nv">minutes</span> <span class="nv">seconds</span><span class="p">]</span>
  <span class="p">(</span><span class="nv">am</span><span class="nf">/</span><span class="nv">pm</span><span class="p">,</span> <span class="nv">adjusted</span><span class="nf">-</span><span class="nv">hours</span><span class="p">)</span> <span class="nf">=</span> <span class="kr">if</span> <span class="nv">hours</span> <span class="nf">&gt;=</span> <span class="mi">12</span> <span class="kr">then</span> <span class="p">(</span><span class="s">&quot;PM&quot;</span><span class="p">,</span> <span class="nv">hours</span> <span class="nf">-</span> <span class="mi">12</span><span class="p">)</span>
                            <span class="kr">else</span> <span class="kr">if</span> <span class="nv">hours</span> <span class="nf">=</span> <span class="mi">0</span> <span class="kr">then</span> <span class="p">(</span><span class="s">&quot;AM&quot;</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span>
                            <span class="kr">else</span> <span class="p">(</span><span class="s">&quot;AM&quot;</span><span class="p">,</span> <span class="nv">hours</span><span class="p">)</span>
<span class="nv">bind</span> <span class="err">@</span><span class="nv">browser</span>
  <span class="p">[</span><span class="err">#</span><span class="nv">div</span> <span class="nv">text</span><span class="nf">:</span> <span class="s">&quot;The current time is {{adjusted-hours}}:{{minutes}}:{{seconds}} {{am/pm}}&quot;</span><span class="p">]</span>
</code></pre></div>

<h2 id="see-also">See Also</h2>

<p><a href="../commit">commit</a> | <a href="../databases">databases</a> | <a href="../search">search</a></p>


			</div>
		</article>
	</div>
</main>
<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="en-us">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <title>Blocks - Eve Documentation</title>
    <meta name="generator" content="Hugo 0.16" />

    
    <link rel="canonical" href="http://docs.witheve.com/handbook/blocks/">
    
    <meta name="author" content="Eve">
    

    <meta property="og:url" content="http://docs.witheve.com/handbook/blocks/">
    <meta property="og:title" content="Eve Documentation">
    
    <meta name="apple-mobile-web-app-title" content="Eve Documentation">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="http://docs.witheve.com/images/favicon.png">
    <link rel="icon" type="image/x-icon" href="http://docs.witheve.com/images/favicon.png">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('http://docs.witheve.com/fonts/icon.eot?52m981');
        src: url('http://docs.witheve.com/fonts/icon.eot?#iefix52m981')
               format('embedded-opentype'),
             url('http://docs.witheve.com/fonts/icon.woff?52m981')
               format('woff'),
             url('http://docs.witheve.com/fonts/icon.ttf?52m981')
               format('truetype'),
             url('http://docs.witheve.com/fonts/icon.svg?52m981#icon')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="http://docs.witheve.com/stylesheets/application.css">
    <link rel="stylesheet" href="http://docs.witheve.com/stylesheets/temporary.css">
    <link rel="stylesheet" href="http://docs.witheve.com/stylesheets/palettes.css">
    <link rel="stylesheet" href="http://docs.witheve.com/stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu&#43;Mono">
    <style>
      body, input {
        font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <script src="http://docs.witheve.com/javascripts/modernizr.js"></script>

    

  </head>
  <body class=" ">



	
	


<main class="main">
	<div class="drawer">
		<nav aria-label="Navigation">
  
  <center>
    <img class="logo" src="https://witheve.github.io/assets/images/logo_square.png">
  </center>

  <div class="scrollable">
    <div class="wrapper">
      

      
      <div id="sidebar" class="nav-collapse">
          <ul class="sidebar-menu">
            
            
              
                <li class="sub-menu active">
                  <a href="http://docs.witheve.com/handbook/intro" class="">
                      
                      <span class="colored">Introduction</span>
                      <span class="menu-arrow arrow_carrot-right"></span>
                  </a>
                  <ul class="sub">
                    
                      <li><a href="http://docs.witheve.com/handbook/installation/"> Getting Eve </a> </li>
                      
                        <ul class="sub">
                          
                            <li><a href="http://docs.witheve.com/handbook/linux/">Linux</a></li>
                          
                            <li><a href="http://docs.witheve.com/handbook/mac/">Mac</a></li>
                          
                            <li><a href="http://docs.witheve.com/handbook/windows/">Windows</a></li>
                          
                            <li><a href="http://docs.witheve.com/handbook/docker/">Docker</a></li>
                          
                            <li><a href="http://docs.witheve.com/handbook/npm/">npm</a></li>
                          
                        </ul>
                      
                    
                      <li><a href="http://docs.witheve.com/handbook/running/"> Running Eve </a> </li>
                      
                    
                      <li><a href="http://docs.witheve.com/handbook/help/"> Getting Help </a> </li>
                      
                    
                  </ul>
                </li>
              
            
              
                <li class="sub-menu active">
                  <a href="http://docs.witheve.com/handbook/programs" class="">
                      
                      <span class="colored">Eve Programs</span>
                      <span class="menu-arrow arrow_carrot-right"></span>
                  </a>
                  <ul class="sub">
                    
                      <li><a href="http://docs.witheve.com/handbook/model/"> Programming Model </a> </li>
                      
                    
                      <li><a href="http://docs.witheve.com/handbook/sets/"> Sets </a> </li>
                      
                    
                      <li><a href="http://docs.witheve.com/handbook/literate-programming/"> Literate Programming </a> </li>
                      
                    
                      <li class="active selected"><a href="http://docs.witheve.com/handbook/blocks/"> Blocks </a> </li>
                      
                    
                  </ul>
                </li>
              
            
              
                <li class="sub-menu active">
                  <a href="http://docs.witheve.com/handbook/core" class="">
                      
                      <span class="colored">Core Language</span>
                      <span class="menu-arrow arrow_carrot-right"></span>
                  </a>
                  <ul class="sub">
                    
                      <li><a href="http://docs.witheve.com/handbook/records/"> Records </a> </li>
                      
                        <ul class="sub">
                          
                            <li><a href="http://docs.witheve.com/handbook/tags/">Tags</a></li>
                          
                            <li><a href="http://docs.witheve.com/handbook/not/">not</a></li>
                          
                        </ul>
                      
                    
                      <li><a href="http://docs.witheve.com/handbook/equivalence/"> Equivalence </a> </li>
                      
                        <ul class="sub">
                          
                            <li><a href="http://docs.witheve.com/handbook/equality/">Equality</a></li>
                          
                            <li><a href="http://docs.witheve.com/handbook/inequality/">Inequality</a></li>
                          
                            <li><a href="http://docs.witheve.com/handbook/joins/">Joins</a></li>
                          
                        </ul>
                      
                    
                      <li><a href="http://docs.witheve.com/handbook/actions/"> Actions </a> </li>
                      
                        <ul class="sub">
                          
                            <li><a href="http://docs.witheve.com/handbook/search/">search</a></li>
                          
                            <li><a href="http://docs.witheve.com/handbook/bind/">bind</a></li>
                          
                            <li><a href="http://docs.witheve.com/handbook/commit/">commit</a></li>
                          
                        </ul>
                      
                    
                      <li><a href="http://docs.witheve.com/handbook/expressions/"> Expressions </a> </li>
                      
                        <ul class="sub">
                          
                            <li><a href="http://docs.witheve.com/handbook/functions/">Functions</a></li>
                          
                            <li><a href="http://docs.witheve.com/handbook/aggregates/">Aggregates</a></li>
                          
                            <li><a href="http://docs.witheve.com/handbook/if-then/">if-then</a></li>
                          
                            <li><a href="http://docs.witheve.com/handbook/is/">is</a></li>
                          
                            <li><a href="http://docs.witheve.com/handbook/string-interpolation/">String Interpolation</a></li>
                          
                        </ul>
                      
                    
                      <li><a href="http://docs.witheve.com/handbook/update-operators/"> Update Operators </a> </li>
                      
                        <ul class="sub">
                          
                            <li><a href="http://docs.witheve.com/handbook/add/">Add: &#43;=</a></li>
                          
                            <li><a href="http://docs.witheve.com/handbook/set/">Set: :=</a></li>
                          
                            <li><a href="http://docs.witheve.com/handbook/remove/">Remove: -=</a></li>
                          
                            <li><a href="http://docs.witheve.com/handbook/merge/">Merge &lt;-</a></li>
                          
                        </ul>
                      
                    
                  </ul>
                </li>
              
            
              
                <li class="sub-menu active">
                  <a href="http://docs.witheve.com/handbook/databases" class="">
                      
                      <span class="colored">Databases</span>
                      <span class="menu-arrow arrow_carrot-right"></span>
                  </a>
                  <ul class="sub">
                    
                      <li><a href="http://docs.witheve.com/handbook/standard-library/"> Standard Library </a> </li>
                      
                        <ul class="sub">
                          
                            <li><a href="http://docs.witheve.com/handbook/general/">General</a></li>
                          
                            <li><a href="http://docs.witheve.com/handbook/math/">Math</a></li>
                          
                            <li><a href="http://docs.witheve.com/handbook/strings/">Strings</a></li>
                          
                            <li><a href="http://docs.witheve.com/handbook/statistics/">Statistics</a></li>
                          
                            <li><a href="http://docs.witheve.com/handbook/datetime/">Date &amp; Time</a></li>
                          
                        </ul>
                      
                    
                      <li><a href="http://docs.witheve.com/handbook/session/"> @session </a> </li>
                      
                    
                      <li><a href="http://docs.witheve.com/handbook/browser/"> @browser </a> </li>
                      
                    
                      <li><a href="http://docs.witheve.com/handbook/event/"> @event </a> </li>
                      
                        <ul class="sub">
                          
                            <li><a href="http://docs.witheve.com/handbook/event/click/">click</a></li>
                          
                        </ul>
                      
                    
                      <li><a href="http://docs.witheve.com/handbook/http/"> @http </a> </li>
                      
                    
                      <li><a href="http://docs.witheve.com/handbook/view/"> @view </a> </li>
                      
                    
                  </ul>
                </li>
              
            
              
                <li class="sub-menu active">
                  <a href="http://docs.witheve.com/handbook/appendix" class="">
                      
                      <span class="colored">Appendix</span>
                      <span class="menu-arrow arrow_carrot-right"></span>
                  </a>
                  <ul class="sub">
                    
                      <li><a href="http://docs.witheve.com/handbook/ebnf/"> Grammar </a> </li>
                      
                    
                      <li><a href="http://docs.witheve.com/handbook/commonmark/"> CommonMark </a> </li>
                      
                    
                      <li><a href="http://docs.witheve.com/handbook/glossary/"> Glossary </a> </li>
                      
                    
                  </ul>
                </li>
              
            
              
                <li class="sub-menu active">
                  <a href="http://docs.witheve.com/guides" class="">
                      
                      <span class="colored">Guides</span>
                      <span class="menu-arrow arrow_carrot-right"></span>
                  </a>
                  <ul class="sub">
                    
                      <li><a href="http://docs.witheve.com/guides/for-programmers/"> Eve for Programmers </a> </li>
                      
                    
                      <li><a href="http://docs.witheve.com/guides/style/"> Style Guide </a> </li>
                      
                    
                  </ul>
                </li>
              
            
              
                <li class="sub-menu active">
                  <a href="http://docs.witheve.com/tutorials" class="">
                      
                      <span class="colored">Tutorials</span>
                      <span class="menu-arrow arrow_carrot-right"></span>
                  </a>
                  <ul class="sub">
                    
                      <li><a href="http://docs.witheve.com/tutorials/quickstart/"> Quickstart </a> </li>
                      
                    
                  </ul>
                </li>
              
            
          </ul>
      </div>

    </div>
  </div>
</nav>
	</div>
	<article class="article">
		<div class="wrapper">

			

<h1 id="blocks">Blocks</h1>

<p>blocks compose Eve programs</p>

<h2 id="syntax">Syntax</h2>
<div class="highlight"><pre><code class="language-eve" data-lang="eve"><span></span><span class="c1">// Blocks contain Eve code and can execute actions</span><span class="w"></span>
<span class="x">```</span><span class="w"></span>
<span class="kr">search</span><span class="w"></span>
<span class="w">  </span><span class="x">.....</span><span class="w"></span>

<span class="kr">bind</span><span class="w"></span>
<span class="w">  </span><span class="x">.....</span><span class="w"></span>

<span class="kr">commit</span><span class="w"></span>
<span class="w">  </span><span class="x">.....</span><span class="w"></span>
<span class="x">```</span><span class="w"></span>

<span class="c1">// Blocks that are disabled are not executed</span><span class="w"></span>
<span class="x">```eve</span><span class="w"> </span><span class="x">disabled</span><span class="w"></span>
<span class="kr">search</span><span class="w"></span>
<span class="w">  </span><span class="x">....</span><span class="w"></span>
<span class="x">```</span><span class="w"></span>

<span class="c1">// Non-Eve blocks are not parsed or executed</span><span class="w"></span>
<span class="x">```javascript</span><span class="w"></span>
<span class="x">function</span><span class="p">()</span><span class="w"> </span><span class="x">{</span><span class="w"></span>
<span class="w">  </span><span class="x">...</span><span class="w"></span>
<span class="x">}</span><span class="w"></span>
<span class="x">```</span><span class="w"></span>

<span class="c1">// Blocks that omit the search action are satisfied by default</span><span class="w"></span>
<span class="x">```</span><span class="w"></span>
<span class="kr">bind</span><span class="w"></span>
<span class="w">  </span><span class="x">.....</span><span class="w"></span>
<span class="x">```</span><span class="w"></span>

<span class="x">```</span><span class="w"></span>
<span class="kr">commit</span><span class="w"></span>
<span class="w">  </span><span class="x">.....</span><span class="w"></span>
<span class="x">```</span><span class="w"></span>
</code></pre></div>

<h2 id="description">Description</h2>

<p>A <code>block</code> is the fundamental unit of Eve code. Eve programs are made up of a series of blocks, each of which can perform actions:</p>

<ol>
<li>A block searches one or more databases for records.</li>
<li>A block binds or commits new records in one or more databases.</li>
</ol>

<p>Blocks execute when the records they search for exist or change. If a block doesn&rsquo;t search for any records, then the block executes by default, but it can never update bound or committed records.</p>

<p>Blocks can have any number of <code>search</code>, <code>commit</code>, and <code>bind</code> actions, each of which can reference any number of databases. If a block has multiple <code>search</code> actions, it will only execute if <em>all</em> searches are satisfied.</p>

<p>Blocks automatically keep bound and committed records up-to-date with matched records. When a record matching a search changes, those changes are reflected automatically in bound and committed records within that block.</p>

<h2 id="specifying-a-block">Specifying a Block</h2>

<p>Blocks are specified using two fences to delineate the beginning and end of the block. Code fences are matching pairs of either three consecutive ticks (```) or tildes (~~~). This style of code block is the same as supported by <a href="http://spec.commonmark.org/0.26/#fenced-code-blocks">CommonMark</a>. However, we don&rsquo;t currently support specifying code blocks via indentation.</p>

<h2 id="info-strings">Info Strings</h2>

<p>You can specify the type of code within a block with an info string, written directly after the block&rsquo;s opening code fence. By default, any block without an info string are assumed to contain Eve code.</p>

<pre><code>```
// An implicit block of Eve code. This block is parsed and executed
  ...
```

```eve
// An explicit block of Eve code. This block is parsed and executed
  ...
```

```eve disabled
// An explicit block of Eve code. This block is parsed, but not executed
  ...
```

```javascript
// An explicit block of Javascript code. This block is ignored
// by the Eve compiler entirely
  ...
```
</code></pre>

<h2 id="tips">Tips</h2>

<p>Although they are similar, it&rsquo;s important not to think of blocks like functions in other languages. Blocks don&rsquo;t have a name, and you don&rsquo;t &ldquo;call&rdquo; them like you do functions. Instead, you &ldquo;use&rdquo; a block by searching for the records it creates.</p>

<p>Likewise, there is no &ldquo;main&rdquo; block. Since Eve is declarative and there is no order, there is no particular starting point for a program. As a close analog, any block that does not search for records will be the first to execute when the program starts. For instance:</p>
<div class="highlight"><pre><code class="language-eve" data-lang="eve"><span></span><span class="kr">commit</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="nt">#student</span><span class="w"> </span><span class="x">name</span><span class="nf">:</span><span class="w"> </span><span class="s">&quot;Sally&quot;</span><span class="p">]</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="nt">#student</span><span class="w"> </span><span class="x">name</span><span class="nf">:</span><span class="w"> </span><span class="s">&quot;Ingrid&quot;</span><span class="p">]</span><span class="w"></span>
</code></pre></div>

<p>This block has no <code>search</code> action, so it doesn&rsquo;t depend on any other records. Thus, it can be viewed as a &ldquo;root&rdquo; of the program. A program may contain many such root blocks.</p>

<h2 id="examples">Examples</h2>

<p>A block with search and bind actions. The bind action adds the <code>#div</code> to the <code>@browser</code> database.</p>
<div class="highlight"><pre><code class="language-eve" data-lang="eve"><span></span><span class="kr">search</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="x">name</span><span class="p">]</span><span class="w"></span>

<span class="kr">bind</span><span class="w"> </span><span class="nt">@browser</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="nt">#div</span><span class="w"> </span><span class="x">text</span><span class="nf">:</span><span class="w"> </span><span class="x">name</span><span class="p">]</span><span class="w"></span>
</code></pre></div>

<p>A block with only a commit action:</p>
<div class="highlight"><pre><code class="language-eve" data-lang="eve"><span></span><span class="kr">commit</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="x">name</span><span class="nf">:</span><span class="w"> </span><span class="s">&quot;Roger&quot;</span><span class="p">]</span><span class="w"></span>
</code></pre></div>

<hr />

<p>Search for a <code>#click</code> in <code>@event</code>, create a <code>#request</code> in <code>@http</code></p>
<div class="highlight"><pre><code class="language-eve" data-lang="eve"><span></span><span class="kr">search</span><span class="w"> </span><span class="nt">@event</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="nt">#click</span><span class="p">]</span><span class="w"></span>

<span class="kr">commit</span><span class="w"> </span><span class="nt">@http</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="nt">#request</span><span class="w"> </span><span class="nt">#google</span><span class="w"> </span><span class="x">url</span><span class="nf">:</span><span class="w"> </span><span class="s">&quot;https://jsonplaceholder.typicode.com/posts/&quot;</span><span class="p">]</span><span class="w"></span>
</code></pre></div>

<p>Search for a <code>#request</code> with a response, display it in the browser</p>
<div class="highlight"><pre><code class="language-eve" data-lang="eve"><span></span><span class="kr">search</span><span class="w"> </span><span class="nt">@http</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="nt">#request</span><span class="w"> </span><span class="nt">#google</span><span class="w"> </span><span class="x">response</span><span class="nf">:</span><span class="w"> </span><span class="p">[</span><span class="x">json</span><span class="p">]]</span><span class="w"></span>
<span class="w">  </span><span class="x">json</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="p">[</span><span class="nt">#array</span><span class="p">]</span><span class="w"></span>
<span class="w">  </span><span class="x">lookup</span><span class="p">[</span><span class="x">record</span><span class="nf">:</span><span class="w"> </span><span class="x">json</span><span class="p">,</span><span class="w"> </span><span class="x">attribute</span><span class="p">,</span><span class="w"> </span><span class="x">value</span><span class="nf">:</span><span class="w"> </span><span class="p">[</span><span class="x">title</span><span class="w"> </span><span class="x">body</span><span class="p">]]</span><span class="w"></span>

<span class="kr">bind</span><span class="w"> </span><span class="nt">@browser</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="nt">#div</span><span class="w"> </span><span class="x">text</span><span class="nf">:</span><span class="w"> </span><span class="s">&quot;{{title}}&quot;</span><span class="p">]</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="nt">#div</span><span class="w"> </span><span class="x">text</span><span class="nf">:</span><span class="w"> </span><span class="s">&quot;{{body}}&quot;</span><span class="p">]</span><span class="w"></span>
</code></pre></div>

<h2 id="see-also">See Also</h2>

<p><a href="../search">search</a> | <a href="../bind">bind</a> | <a href="../commit">commit</a> | <a href="../databases">databases</a></p>


		</div>
	</article>

</main>

